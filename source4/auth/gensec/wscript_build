#!/usr/bin/env python

bld.SAMBA_LIBRARY('gensec',
	source='gensec.c socket.c',
	pc_files='gensec.pc',
	autoproto='gensec_proto.h',
	public_deps='CREDENTIALS LIBSAMBA-UTIL LIBCRYPTO ASN1_UTIL samba_socket LIBPACKET LIBTSOCKET UTIL_TEVENT',
	public_headers='gensec.h',
	vnum='0.0.1'
	)


bld.SAMBA_MODULE('gensec_krb5',
	source='gensec_krb5.c',
	subsystem='gensec',
	init_function='gensec_krb5_init',
	deps='CREDENTIALS KERBEROS auth_session'
	)


bld.SAMBA_MODULE('gensec_gssapi',
	source='gensec_gssapi.c',
	subsystem='gensec',
	init_function='gensec_gssapi_init',
	deps='HEIMDAL_GSSAPI CREDENTIALS KERBEROS'
	)


bld.SAMBA_MODULE('cyrus_sasl',
	source='cyrus_sasl.c',
	subsystem='gensec',
	init_function='gensec_sasl_init',
	deps='CREDENTIALS SASL',
	enabled=bld.CONFIG_SET('HAVE_SASL')
	)


bld.SAMBA_MODULE('gensec_spnego',
	source='spnego.c ../../../libcli/auth/spnego_parse.c',
	autoproto='spnego_proto.h',
	subsystem='gensec',
	init_function='gensec_spnego_init',
	deps='ASN1_UTIL CREDENTIALS'
	)


bld.SAMBA_MODULE('gensec_schannel',
	source='schannel.c ../../../libcli/auth/schannel_sign.c',
	subsystem='gensec',
	deps='COMMON_SCHANNELDB NDR_SCHANNEL CREDENTIALS LIBNDR auth_session',
	internal_module=True,
	autoproto='schannel_proto.h',
	init_function='gensec_schannel_init'
	)


bld.SAMBA_PYTHON('pygensec',
	source='pygensec.c',
	deps='gensec PYTALLOC pyparam_util',
	realname='samba/gensec.so'
	)

