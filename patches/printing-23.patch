diff -uNr samba-3.0alpha23.orig/source/printing/printing.c samba-3.0alpha23/source/printing/printing.c
--- samba-3.0alpha23.orig/source/printing/printing.c	2003-04-09 09:37:26.000000000 -0500
+++ samba-3.0alpha23/source/printing/printing.c	2003-04-09 09:39:21.000000000 -0500
@@ -835,7 +835,7 @@
 
 	/* Work out the size. */
 	data.dsize = 0;
-	data.dsize += tdb_pack(NULL, 0, NULL, "d", qcount);
+	data.dsize += tdb_pack(NULL, 0, "d", qcount);
 
 	for (i = 0; i < pts->qcount; i++) {
 		data.dsize += tdb_pack(NULL, 0, "ddddddff",
diff -uNr samba-3.0alpha23.orig/source/rpc_server/srv_spoolss_nt.c samba-3.0alpha23/source/rpc_server/srv_spoolss_nt.c
--- samba-3.0alpha23.orig/source/rpc_server/srv_spoolss_nt.c	2003-03-30 20:28:31.000000000 -0600
+++ samba-3.0alpha23/source/rpc_server/srv_spoolss_nt.c	2003-04-09 09:38:53.000000000 -0500
@@ -8324,7 +8324,6 @@
 	info_1=(JOB_INFO_1 *)malloc(sizeof(JOB_INFO_1));
 
 	if (info_1 == NULL) {
-		SAFE_FREE(queue);
 		return WERR_NOMEM;
 	}
 		
@@ -8334,7 +8333,6 @@
 	}
 	
 	if (found==False) {
-		SAFE_FREE(queue);
 		SAFE_FREE(info_1);
 		/* NT treats not found as bad param... yet another bad choice */
 		return WERR_INVALID_PARAM;
diff -uNr samba-3.0alpha23.orig/source/smbd/reply.c samba-3.0alpha23/source/smbd/reply.c
--- samba-3.0alpha23.orig/source/smbd/reply.c	30 Mar 2003 16:37:10 -0000	1.85.2.13
+++ samba-3.0alpha23/source/smbd/reply.c	9 Apr 2003 20:12:15 -0000
@@ -271,7 +271,7 @@
 	if ( IS_IPC(conn) )
 		server_devicetype = "IPC";
 	else if ( IS_PRINT(conn) )
-		server_devicetype = "LPT:";
+		server_devicetype = "LPT1:";
 	else 
 		server_devicetype = "A:";
 
diff -uNr samba-3.0alpha23.orig/source/smbd/service.c samba-3.0alpha23/source/smbd/service.c
--- samba-3.0alpha23.orig/source/smbd/service.c	30 Mar 2003 16:37:10 -0000	1.85.2.13
+++ samba-3.0alpha23/source/smbd/service.c	9 Apr 2003 20:12:15 -0000
@@ -240,7 +240,7 @@
 	strupper(dev);
 
 	if (lp_print_ok(snum)) {
-		if (!strequal(dev, "LPT:")) {
+		if (!strequal(dev, "LPT1:")) {
 			return NT_STATUS_BAD_DEVICE_TYPE;
 		}
 	} else if (strequal(lp_fstype(snum), "IPC")) {
